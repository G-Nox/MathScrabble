@(controller: de.htwg.se.scrabble.controller.controllerComponent.ControllerInterface)

@size = @{
    controller.gridSize
}

@grid = @{
    controller.getGameField.grid
}

@pile = @{
    controller.getGameField.pile
}

@currPlayer = @{
    controller.gameStatus.currPlayer()
}

@playerlist = @{
    controller.getGameField.playerList
}

@hand = @{
    playerlist(currPlayer).hand
}

@main("HTWG Scrabble") {
    <div class="container main2">
        <div class="row">
            <div class="col gamecontainer">
                <div class="myGrid">
                    <div class="myRow">
                        <div class="myCell myLabel"> </div>
                        @for(i <- 1 until size + 1) {
                            <div class="myCell myLabel">@i</div>
                        }
                    </div>
                    @for(col <- 0 until size) {
                        <div class="myRow">
                            <div class="myCell myLabel">@(col + 1)</div>
                            @for(row <- 0 until size) {
                                @if(grid.cell(row, col).isSet) {
                                    @card(grid.cell(row, col).card, addedClass = "myCell")
                                } else {
                                    @if(grid.cell(row, col).isNormal) {
                                        <div class="myCell normal">@grid.cell(row, col)</div>
                                    } else {
                                        @if(grid.cell(row, col).isDouble) {
                                            <div class="myCell double">@grid.cell(row, col)</div>
                                        } else {
                                            <div class="myCell triple">@grid.cell(row, col)</div>
                                        }
                                    }
                                }
                            }
                        </div>
                    }
                </div>
                <div class="myHand">
                @for(c <- hand) {
                    @card(c, addedClass = "inHand")
                }
                </div>
            </div>
            <div class="col control">
                <div class="info">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                            @if(currPlayer equals "A") {
                                <div class="card score active rounded">
                                    Player A: <span class="playerpoint">@playerlist("A").point</span>
                                </div>
                            } else {
                                <div class="card score mb-2 rounded">
                                    Player A: <span class="playerpoint">@playerlist("A").point</span>
                                </div>
                            }
                            </div>
                            <div class="col">
                            @if(currPlayer equals "B") {
                                <div class="card score active rounded">
                                    Player B: <span class="playerpoint">@playerlist("B").point</span>
                                </div>
                            } else {
                                <div class="card score mb-2 rounded">
                                    Player B: <span class="playerpoint">@playerlist("B").point</span>
                                </div>
                            }
                            </div>
                        </div>
                    </div>
                    <p>cards in stack: @pile.size</p>
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <a type="button" class="btn btn-primary btn-block" href="@routes.HomeController.newGrid()">
                                    new game</a>
                                <div class="dropdown show btn-block">
                                    <a class="btn dropdown-toggle btn-primary btn-block" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Resize
                                    </a>
                                    <div class="dropdown-menu btn-block" aria-labelledby="dropdownMenuLink">
                                        <button class="dropdown-item" id="3x3">3x3</button>
                                        <button class="dropdown-item" id="9x9">9x9</button>
                                        <button class="dropdown-item" id="15x15">15x15</button>
                                    </div>
                                </div>
                                <a type="button" id="set" class="btn btn-secondary btn-block" href="@routes.HomeController.undo">
                                    undo</a>
                                <a type="button" id="set" class="btn btn-secondary btn-block" href="@routes.HomeController.redo">
                                    redo</a>
                                <a type="button" class="btn btn-dark btn-block" href="@routes.HomeController.switchCards(currPlayer)">
                                    switch cards</a>
                                <a type="button" class="btn btn-success btn-block" id="submit" href="@routes.HomeController.submit()">
                                    submit</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
